<!DOCTYPE html>
<html>
<head>
    <title>UsdtGift Owner Console</title>
    <style>
        body {
            background-color: #1a1a1a;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .section {
            background-color: #2a2a2a;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        input, button {
            background-color: #333;
            color: #00ff00;
            border: 1px solid #00ff00;
            padding: 5px;
            margin: 5px;
        }

        button {
            cursor: pointer;
        }

        button:hover {
            background-color: #444;
        }

        .log {
            background-color: #000;
            padding: 10px;
            height: 200px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>UsdtGift Owner Console</h1>
        <button id="connectButton">Conectar Wallet</button>
        
        <div class="section">
            <h3>Transferir al Contrato</h3>
            <select id="assetType">
                <option value="ERC20">ERC20</option>
                <option value="ERC721">ERC721</option>
                <option value="ERC1155">ERC1155</option>
            </select>
            
            <div id="erc20Form">
                <input type="text" id="userAddress" placeholder="User Address">
                <input type="text" id="tokenAddress" placeholder="Token Address">
                <input type="number" id="amount" placeholder="Amount">
                <button onclick="transferToContract()">Transferir</button>
            </div>
        </div>

        <div class="section">
            <h3>Retirar del Contrato</h3>
            <select id="withdrawType">
                <option value="ERC20">ERC20</option>
                <option value="ERC721">ERC721</option>
                <option value="ERC1155">ERC1155</option>
                <option value="ETH">ETH</option>
            </select>
            
            <div id="withdrawForm">
                <input type="text" id="withdrawToken" placeholder="Token Address">
                <input type="number" id="withdrawId" placeholder="Token ID">
                <input type="number" id="withdrawAmount" placeholder="Amount">
                <button onclick="withdrawAsset()">Retirar</button>
            </div>
        </div>

        <div class="section">
            <h3>Registro de Eventos</h3>
            <div class="log" id="log"></div>
        </div>
    </div>

    <script src="https://cdn.ethers.io/lib/ethers-5.7.umd.min.js"></script>
    <script>
        let contract;
        let provider;
        let signer;
        
        const contractABI = [ /* ABI del contrato aquí */ ];

        async function connectWallet() {
            provider = new ethers.providers.Web3Provider(window.ethereum);
            await provider.send("eth_requestAccounts", []);
            signer = provider.getSigner();
            contract = new ethers.Contract(contractAddress, contractABI, signer);
            log('Wallet conectada: ' + await signer.getAddress());
        }

        async function transferToContract() {
            const assetType = document.getElementById('assetType').value;
            const userAddress = document.getElementById('userAddress').value;
            const tokenAddress = document.getElementById('tokenAddress').value;
            const amount = document.getElementById('amount').value;

            try {
                if(assetType === 'ERC20') {
                    await contract.transferERC20ToContract(userAddress, tokenAddress, amount);
                }
                else if(assetType === 'ERC721') {
                    const tokenId = amount;
                    await contract.transferERC721ToContract(userAddress, tokenAddress, tokenId);
                }
                else if(assetType === 'ERC1155') {
                    await contract.transferERC1155ToContract(userAddress, tokenAddress, tokenId, amount);
                }
                log('Transacción enviada: ' + assetType);
            } catch (error) {
                log('Error: ' + error.message);
            }
        }

        async function withdrawAsset() {
            const withdrawType = document.getElementById('withdrawType').value;
            const tokenAddress = document.getElementById('withdrawToken').value;
            const tokenId = document.getElementById('withdrawId').value;
            const amount = document.getElementById('withdrawAmount').value;

            try {
                if(withdrawType === 'ERC20') {
                    await contract.withdrawERC20(tokenAddress, amount);
                }
                else if(withdrawType === 'ERC721') {
                    await contract.withdrawERC721(tokenAddress, tokenId);
                }
                else if(withdrawType === 'ERC1155') {
                    await contract.withdrawERC1155(tokenAddress, tokenId, amount);
                }
                else if(withdrawType === 'ETH') {
                    await contract.withdrawETH(amount);
                }
                log('Retiro exitoso: ' + withdrawType);
            } catch (error) {
                log('Error: ' + error.message);
            }
        }

        function log(message) {
            const logElement = document.getElementById('log');
            logElement.innerHTML += new Date().toLocaleTimeString() + ' - ' + message + '\n';
            logElement.scrollTop = logElement.scrollHeight;
        }

        document.getElementById('connectButton').onclick = connectWallet;
    </script>
</body>
</html>
